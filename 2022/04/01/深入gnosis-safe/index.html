<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"zhuang-weiming.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.3.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>
<meta name="description" content="Build a treasury wallet with multisignature Gnosis Safe - LogRocket Blog Imagine you and your friends are building an NFT marketplace. You are the CEO and your friend works as a Solidity engineer who">
<meta property="og:type" content="article">
<meta property="og:title" content="深入gnosis-safe">
<meta property="og:url" content="https://zhuang-weiming.github.io/2022/04/01/%E6%B7%B1%E5%85%A5gnosis-safe/index.html">
<meta property="og:site_name" content="Zhuang&#39;s Diary">
<meta property="og:description" content="Build a treasury wallet with multisignature Gnosis Safe - LogRocket Blog Imagine you and your friends are building an NFT marketplace. You are the CEO and your friend works as a Solidity engineer who">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2022-04-01T14:43:00.000Z">
<meta property="article:modified_time" content="2023-09-14T06:09:04.378Z">
<meta property="article:author" content="Weiming Zhuang">
<meta property="article:tag" content="数字资产">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://zhuang-weiming.github.io/2022/04/01/%E6%B7%B1%E5%85%A5gnosis-safe/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>
<title>深入gnosis-safe | Zhuang's Diary</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Zhuang's Diary</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">言之有物，持之以恒</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Setting-up-Gnosis-Safe-smart-contracts"><span class="nav-number">1.</span> <span class="nav-text">Setting up Gnosis Safe smart contracts</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Installing-the-Gnosis-Safe-SDK-libraries"><span class="nav-number">2.</span> <span class="nav-text">Installing the Gnosis Safe SDK libraries</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Setting-up-the-env-file"><span class="nav-number">3.</span> <span class="nav-text">Setting up the .env file</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Creating-the-treasury"><span class="nav-number">4.</span> <span class="nav-text">Creating the treasury</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Setting-up-multisignature-authorization-in-Gnosis-Safe-wallet"><span class="nav-number">5.</span> <span class="nav-text">Setting up multisignature authorization in Gnosis Safe wallet</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Obtaining-multisignature-approval"><span class="nav-number">6.</span> <span class="nav-text">Obtaining multisignature approval</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Conclusion"><span class="nav-number">7.</span> <span class="nav-text">Conclusion</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Weiming Zhuang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">255</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">64</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://www.linkedin.com/in/zhuangweiming/" title="Linkedin → https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;zhuangweiming&#x2F;" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i>Linkedin</a>
      </span>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="Back to top">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://zhuang-weiming.github.io/2022/04/01/%E6%B7%B1%E5%85%A5gnosis-safe/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Weiming Zhuang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhuang's Diary">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          深入gnosis-safe
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2022-04-01 22:43:00" itemprop="dateCreated datePublished" datetime="2022-04-01T22:43:00+08:00">2022-04-01</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2023-09-14 14:09:04" itemprop="dateModified" datetime="2023-09-14T14:09:04+08:00">2023-09-14</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p><a target="_blank" rel="noopener" href="https://blog.logrocket.com/build-treasury-wallet-multisignature-gnosis-safe/">Build a treasury wallet with multisignature Gnosis Safe - LogRocket Blog</a></p>
<p>Imagine you and your friends are building an <a target="_blank" rel="noopener" href="https://blog.logrocket.com/create-nft-upload-metadata-ipfs/">NFT marketplace</a>. You are the CEO and your friend works as a Solidity engineer who writes the smart contract. The NFT marketplace becomes popular, and your revenue builds from the market fee of every NFT sale transaction. You store your profit inside a smart contract, and boast to the media about your company that has enough money to buy a private island. Then, the Solidity engineer disappears and withdraws all the funds from the treasury. You watch in horror.</p>
<p>Now, you vow not to fall into the same trap again. From now on, every sensitive transaction in a smart contract needs approval from a certain number of people. For example, withdrawing funds from your treasury requires at least 60 percent approval from certain key people. If there are five key people, at least three approvals are needed.</p>
<p>Luckily, you don’t need to build this mechanism from scratch; you can use <a target="_blank" rel="noopener" href="https://gnosis-safe.io/">Gnosis Safe</a> to interact with your NFT marketplace. You put the funds inside the Gnosis Safe smart contracts, and withdrawing the funds now requires at least a certain number of signatures. A rogue agent cannot steal the funds anymore, and you’re back to saving up for a private island!</p>
<p>Gnosis Safe is a project from <a target="_blank" rel="noopener" href="https://gnosis.io/">Gnosis</a>. Gnosis started as a <a target="_blank" rel="noopener" href="https://whitepaper.io/document/116/gnosis-whitepaper">prediction markets platform</a> where people can trade information freely. As part of the project, the team behind Gnosis created Gnosis Safe to secure funds for multiple participants. Today, it’s the most popular multisig wallet smart contract on Ethereum. Search “multisig wallet Ethereum” on Google and you will find Gnosis in the top results.</p>
<p>In this article, you will learn how to set up a treasury wallet with Gnosis Safe, so you can protect your funds on the Ethereum blockchain.</p>
<h2 id="Setting-up-Gnosis-Safe-smart-contracts"><a href="#Setting-up-Gnosis-Safe-smart-contracts" class="headerlink" title="Setting up Gnosis Safe smart contracts"></a>Setting up Gnosis Safe smart contracts</h2><p>You can clone the Gnosis Safe smart contract from their GitHub repo like so:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/gnosis/safe-contracts.git</span></span><br></pre></td></tr></table></figure>

<p>Use a specific version so you can follow this tutorial:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> safe-contracts</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout v1.3.0-libs.0</span></span><br></pre></td></tr></table></figure>

<p>With this specific version, the deployed addresses of Gnosis Safe will be deterministic.</p>
<p>Let’s deploy Gnosis Safe to the <a target="_blank" rel="noopener" href="https://hardhat.org/">Hardhat</a> development network. But first, you must install Hardhat inside the <code>safe-contracts</code> directory:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yarn add hardhat</span></span><br></pre></td></tr></table></figure>

<p>Then, run the Hardhat development network and deploy the Gnosis Safe smart contracts:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npx hardhat node</span></span><br><span class="line">Nothing to compile</span><br><span class="line">sending eth to create2 contract deployer address (0x3fab184622dc19b6109349b94811493bf2a45362) (tx: 0x076c3e6eb9678931c92e0322885f48ebdc064226483a9bae4866f99c7f8aa8bb)...</span><br><span class="line">deploying create2 deployer contract (at 0x4e59b44847b379578588920ca78fbf26c0b4956c) using deterministic deployment (https://github.com/Arachnid/deterministic-deployment-proxy) (tx: 0xeddf9e61fb9d8f5111840daef55e5fde0041f5702856532cdbb5a02998033d26)...</span><br><span class="line">deploying &quot;SimulateTxAccessor&quot; (tx: 0xfc6d7c491688840e79ed7d8f0fc73494be305250f0d5f62d04c41bc4467e8603)...: deployed at 0x59AD6735bCd8152B84860Cb256dD9e96b85F69Da with 237871 gas</span><br><span class="line">deploying &quot;GnosisSafeProxyFactory&quot; (tx: 0x6fff529768b3c5660234fcd53d5d04918aadc935a90ec05aca1796649bf4f699)...: deployed at 0xa6B71E26C5e0845f74c812102Ca7114b6a896AB2 with 867594 gas</span><br><span class="line">deploying &quot;DefaultCallbackHandler&quot; (tx: 0x406498f13d684b2db11ac78d1b06c2b38657f02e729ecebc677b7ea28a30e712)...: deployed at 0x1AC114C2099aFAf5261731655Dc6c306bFcd4Dbd with 542473 gas</span><br><span class="line">deploying &quot;CompatibilityFallbackHandler&quot; (tx: 0xe7426790ce3fed5ba2083b5e5b911b561a306d3f26fbd5c0d0d6c0c1d5847e3f)...: deployed at 0xf48f2B2d2a534e402487b3ee7C18c33Aec0Fe5e4 with 1238095 gas</span><br><span class="line">deploying &quot;CreateCall&quot; (tx: 0xa602d00962fa8de99f84dbefd62f831f179d12e549863bd305607bbb775f5c81)...: deployed at 0x7cbB62EaA69F79e6873cD1ecB2392971036cFAa4 with 294718 gas</span><br><span class="line">deploying &quot;MultiSend&quot; (tx: 0x8790b4413d0b4336586897f0bf40a72cdcfcb8fd06aed8a164fac5ecf662e0f6)...: deployed at 0xA238CBeb142c10Ef7Ad8442C6D1f9E89e07e7761 with 190004 gas</span><br><span class="line">deploying &quot;MultiSendCallOnly&quot; (tx: 0xb4ccc0ce8099412d505d0ab131ce9fffb1915a5053906875fc301528ebe79f1a)...: deployed at 0x40A2aCCbd92BCA938b02010E17A5b8929b49130D with 142122 gas</span><br><span class="line">deploying &quot;SignMessageLib&quot; (tx: 0xdf0d113415ea15354de8e816b793ca89e5a9a7d4ad7b48e1344872d0f4aacdbf)...: deployed at 0xA65387F16B013cf2Af4605Ad8aA5ec25a2cbA3a2 with 262353 gas</span><br><span class="line">deploying &quot;GnosisSafeL2&quot; (tx: 0x83b42dd66a2e282b3e76cb10fb4ab93da970b0454010faef142ab8c6a5c4233d)...: deployed at 0x3E5c63644E683549055b9Be8653de26E0B4CD36E with 5200241 gas</span><br><span class="line">deploying &quot;GnosisSafe&quot; (tx: 0xea94214f16af5e66646518db2403a6e24b17973d6bbb0208fc40f01343b0225f)...: deployed at 0xd9Db270c1B5E3Bd161E8c8503c55cEABeE709552 with 5017833 gas</span><br><span class="line">Started HTTP and WebSocket JSON-RPC server at http://127.0.0.1:8545/</span><br></pre></td></tr></table></figure>

<p>The Gnosis Safe smart contracts are not just one smart contract; they are many. But you need to pay attention to three smart contracts in particular: <code>MultiSend</code>, <code>GnosisSafe</code>, and <code>GnosisSafeProxyFactory</code>. You need their addresses when you use the Gnosis Safe SDK later.</p>
<p>So what are these three smart contracts?</p>
<p><code>GnosisSafe</code> is the core safe smart contract, and everyone only needs one. Your startup and your business competitors can use the same deployed <code>GnosisSafe</code>, so you don’t need to deploy it separately if it has been deployed already.</p>
<p>You don’t interact directly with <code>GnosisSafe</code>. You use a proxy, called <code>GnosisSafeProxy</code>. Because of this, your startup and your business competitor need to use different <code>GnosisSafeProxy</code>s. To create your own <code>GnosisSafeProxy</code>, you can use <code>GnosisSafeProxyFactory</code>.</p>
<p><code>MultiSend</code> is a helper smart contract to batch multiple transactions into one. You may want to buy a yacht as your startup office, pay salary to a meme artist, and pay taxes to the country where your startup resides. Instead of executing these transactions one by one, you can batch them into one with this helper smart contract, then execute them in one go.</p>
<p>There are other smart contracts as part of the Gnosis Safe, but you don’t touch them directly. You only deal with the three smart contracts mentioned previously. That’s why the Gnosis Safe SDK requires you to provide their addresses.</p>
<p>If you use Gnosis Safe in other networks like Ethereum mainnet or Rinkeby, you don’t need to deploy the Gnosis Safe smart contracts because the team behind Gnosis Safe already deployed these core ones. You just need to find their addresses and write them down. But since you are using the Hardhat development network, you need to do this step.</p>
<p>Let the process run peacefully. You can open a new terminal and create your project that interacts with these smart contracts in the new terminal.</p>
<h2 id="Installing-the-Gnosis-Safe-SDK-libraries"><a href="#Installing-the-Gnosis-Safe-SDK-libraries" class="headerlink" title="Installing the Gnosis Safe SDK libraries"></a>Installing the Gnosis Safe SDK libraries</h2><p>The Gnosis Safe SDK libraries are Node.js libraries. To use them, you need to create a Node project. Let’s create one by creating an empty directory and initialize it with yarn:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdir our-treasury</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> our-treasury</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> yarn init -y</span></span><br><span class="line">yarn init v1.22.11</span><br><span class="line">warning The yes flag has been set. This will automatically answer yes to all questions, which may have security implications.</span><br><span class="line">success Saved package.json</span><br><span class="line">Done in 0.02s.</span><br><span class="line"><span class="meta">$</span><span class="bash"> ls</span></span><br><span class="line">package.json</span><br></pre></td></tr></table></figure>

<p>To interact with Ethereum in Node, you have two choices: <code>web3.js</code> and <code>ethers.js</code>. In this tutorial, you’ll use the <code>ethers.js</code> library. Install the library with yarn like so:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yarn add ethers</span></span><br></pre></td></tr></table></figure>

<p>You will put the Ethereum addresses on the <code>.env</code> file instead of hard-coding them, so you need the <code>dotenv</code> library:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yarn add dotenv</span></span><br></pre></td></tr></table></figure>

<p>Lastly, you need the Gnosis Safe SDK libraries:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> yarn add @gnosis.pm/safe-core-sdk @gnosis.pm/safe-ethers-lib</span></span><br></pre></td></tr></table></figure>

<p>These are the core libraries that you’re going to learn how to use in this tutorial to interface with the Gnosis Safe smart contracts.</p>
<h2 id="Setting-up-the-env-file"><a href="#Setting-up-the-env-file" class="headerlink" title="Setting up the .env file"></a>Setting up the .env file</h2><p>Instead of hard-coding the Ethereum addresses, you can store them as environment variables. But setting up environment variables in a terminal before executing a script is a hassle:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> ACCOUNT_1=0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> ACCOUNT_2=0x70997970c51812dc3a010c7d01b50e0d17dc79c8</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">$</span><span class="bash"> node index.js</span></span><br></pre></td></tr></table></figure>

<p>It’s better if you use the <code>.env</code> file. Basically, you use the <code>dotenv</code> library to load the environment variables from the <code>.env</code> file. That way, you only need to set up the environment variables once.</p>
<p>Create the <code>.env</code> file with the following content:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ACCOUNT_1=&quot;0xf39fd6e51aad88f6f4ce6ab8827279cfffb92266&quot;</span><br><span class="line">ACCOUNT_2=&quot;0x70997970c51812dc3a010c7d01b50e0d17dc79c8&quot;</span><br><span class="line">ACCOUNT_3=&quot;0x3c44cdddb6a900fa2b585dd299e03d12fa4293bc&quot;</span><br><span class="line">ACCOUNT_4=&quot;0x90f79bf6eb2c4f870365e785982e1f101e93b906&quot;</span><br><span class="line">ACCOUNT_5=&quot;0x15d34aaf54267db7d7c367839aaf71a00a2c6a65&quot;</span><br><span class="line">ACCOUNT_6=&quot;0x9965507d1a55bcc2695c58ba16fb37d819b0a4dc&quot;</span><br><span class="line">ACCOUNT_7=&quot;0x976ea74026e726554db657fa54763abd0c3a0aa9&quot;</span><br><span class="line">MULTI_SEND_ADDRESS=&quot;0xA238CBeb142c10Ef7Ad8442C6D1f9E89e07e7761&quot;</span><br><span class="line">SAFE_MASTER_COPY_ADDRESS=&quot;0xd9Db270c1B5E3Bd161E8c8503c55cEABeE709552&quot;</span><br><span class="line">SAFE_PROXY_FACTORY_ADDRESS=&quot;0xa6B71E26C5e0845f74c812102Ca7114b6a896AB2&quot;</span><br></pre></td></tr></table></figure>

<p>In the code above, you can see that the addresses for <code>MULTI_SEND_ADDRESS</code>, <code>SAFE_MASTER_COPY_ADDRESS</code>, <code>SAFE_PROXY_FACTORY_ADDRESS</code> are the same as the ones in the first terminal. As a reminder, the first terminal is the terminal where you’ve deployed the Gnosis Safe smart contracts on the Hardhat development network. Later, in your client code, you will load these smart contracts’ addresses from the <code>.env</code> file to interact with the deployed smart contracts on the Hardhat development network.</p>
<p>The <code>ACCOUNT_1</code> and other accounts are the sample Ethereum addresses provided by the Hardhat development node. If you run <code>npx hardhat node</code> in a new Hardhat project, you will get 20 sample Ethereum addresses with their private keys for development. Each account has 10,000ETH. In this <code>.env</code> file, you just took the first seven addresses.</p>
<h2 id="Creating-the-treasury"><a href="#Creating-the-treasury" class="headerlink" title="Creating the treasury"></a>Creating the treasury</h2><p>Let’s create the <code>index.js</code> file. This is where you will write the code to build the treasury with Gnosis Safe:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> edit index.js <span class="comment"># replace edit with vim or code or your favorite editor</span></span></span><br></pre></td></tr></table></figure>

<p>First things first, you want to be able to read the variables you put in the <code>.env</code> file. So add this line:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;dotenv&#x27;</span>).config();</span><br></pre></td></tr></table></figure>

<p>Then, you import the Gnosis Safe SDK library:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; SafeFactory, SafeAccountConfig, ContractNetworksConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@gnosis.pm/safe-core-sdk&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> Safe = <span class="built_in">require</span>(<span class="string">&#x27;@gnosis.pm/safe-core-sdk&#x27;</span>)[<span class="string">&quot;default&quot;</span>];</span><br></pre></td></tr></table></figure>

<p>To make things clearer, imagine that you’re creating a web3 startup to disrupt traditional banks. There are five people who are building this startup, with you acting as the CEO. The other people on the team are the CTO, a Solidity engineer, a meme artist, and an advisor.</p>
<p>An angel investor sends money to your startup. The money is put inside the safe smart contract. It takes three of five signatures from your team to approve any transactions related to this smart contract. You, as the CEO, decide to buy a yacht for your startup office. You will need two other signatures from your team to approve this transaction. Let’s do it!</p>
<h2 id="Setting-up-multisignature-authorization-in-Gnosis-Safe-wallet"><a href="#Setting-up-multisignature-authorization-in-Gnosis-Safe-wallet" class="headerlink" title="Setting up multisignature authorization in Gnosis Safe wallet"></a>Setting up multisignature authorization in Gnosis Safe wallet</h2><p>To protect your company’s treasury from being emptied by a single member, you have to make sure that three out of your five team members approve of the yacht purchase. Let’s add this functionality now.</p>
<p>Still in the same file, <code>index.js</code>, add these lines below the <code>const Safe = require…</code> line:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ceo = process.env.ACCOUNT_1;</span><br><span class="line"><span class="keyword">const</span> cto = process.env.ACCOUNT_2;</span><br><span class="line"><span class="keyword">const</span> meme_artist = process.env.ACCOUNT_3;</span><br><span class="line"><span class="keyword">const</span> solidity_engineer = process.env.ACCOUNT_4;</span><br><span class="line"><span class="keyword">const</span> advisor = process.env.ACCOUNT_5;</span><br><span class="line"><span class="keyword">const</span> investor = process.env.ACCOUNT_6;</span><br><span class="line"><span class="keyword">const</span> yacht_shop = process.env.ACCOUNT_7;</span><br></pre></td></tr></table></figure>

<p>Here, you load up the addresses you stored on the <code>.env</code> file in <code>index.js</code>. This way, to change the addresses, you don’t need to change the code.</p>
<p>Then, set up a provider from the <code>ethers.js</code> library:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; ethers &#125; = <span class="built_in">require</span>(<span class="string">&#x27;ethers&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> provider = <span class="keyword">new</span> ethers.providers.JsonRpcProvider();</span><br></pre></td></tr></table></figure>

<p>A <a target="_blank" rel="noopener" href="https://docs.ethers.io/v5/api/providers/provider/">provider</a> is an Ethereum connection object. Here, you create an abstraction of a JSON-RPC connection to an Ethereum node.</p>
<p>From this provider, you create three signers from three addresses. Remember, you only need three signatures to approve a transaction in the safe:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ceo_signer = provider.getSigner(ceo);</span><br><span class="line"><span class="keyword">const</span> cto_signer = provider.getSigner(cto);</span><br><span class="line"><span class="keyword">const</span> advisor_signer = provider.getSigner(advisor);</span><br></pre></td></tr></table></figure>

<p>The Gnosis Safe smart contracts work with the <code>ethers.js</code> library and the <code>web3.js</code> library. In this tutorial, you are using <code>ethers.js</code>. So you need the adapter that works with <code>ethers.js</code>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> EthersAdapter = <span class="built_in">require</span>(<span class="string">&#x27;@gnosis.pm/safe-ethers-lib&#x27;</span>)[<span class="string">&quot;default&quot;</span>];</span><br><span class="line"><span class="keyword">const</span> ethAdapter_ceo = <span class="keyword">new</span> EthersAdapter(&#123; ethers, <span class="attr">signer</span>: ceo_signer &#125;);</span><br><span class="line"><span class="keyword">const</span> ethAdapter_cto = <span class="keyword">new</span> EthersAdapter(&#123; ethers, <span class="attr">signer</span>: cto_signer &#125;);</span><br><span class="line"><span class="keyword">const</span> ethAdapter_advisor = <span class="keyword">new</span> EthersAdapter(&#123; ethers, <span class="attr">signer</span>: advisor_signer &#125;);</span><br></pre></td></tr></table></figure>

<p>In the code above, you interacted with the Gnosis Safe SDK using these adapters. Note that each address needs its own adapter.</p>
<p>Next, create the <code>main</code>, asynchronous function. You will use <a target="_blank" rel="noopener" href="https://hardhat.org/getting-started/#deploying-your-contracts">this pattern to handle</a> <code>async/await</code> and handle errors in the code properly:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// FROM NOW ON, YOUR CODE IS PUT HERE</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main()</span><br><span class="line">  .then(<span class="function">() =&gt;</span> process.exit(<span class="number">0</span>))</span><br><span class="line">  .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(error);</span><br><span class="line">    process.exit(<span class="number">1</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>As explained in the beginning of the tutorial, the only way to create a safe is from the safe factory that is shared with everyone. So first, you need to create a safe factory object connecting to the safe factory smart contract, <code>GnosisSafeProxyFactory</code>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> id = <span class="keyword">await</span> ethAdapter_ceo.getChainId();</span><br><span class="line"><span class="keyword">const</span> contractNetworks = &#123;</span><br><span class="line">  [id]: &#123;</span><br><span class="line">    multiSendAddress: process.env.MULTI_SEND_ADDRESS,</span><br><span class="line">    safeMasterCopyAddress: process.env.SAFE_MASTER_COPY_ADDRESS,</span><br><span class="line">    safeProxyFactoryAddress: process.env.SAFE_PROXY_FACTORY_ADDRESS</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> safeFactory = <span class="keyword">await</span> SafeFactory.create(&#123; <span class="attr">ethAdapter</span>: ethAdapter_ceo, <span class="attr">contractNetworks</span>: contractNetworks &#125;);</span><br></pre></td></tr></table></figure>

<p>In the code above, you first received the chain ID. Then, you created an object containing three smart contracts with which you safe will interact. Finally, you created a safe factory.</p>
<p>Next, create a safe from this safe factory like so:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> owners = [ceo, cto, meme_artist, solidity_engineer, advisor];</span><br><span class="line"><span class="keyword">const</span> threshold = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">const</span> safeAccountConfig = &#123; <span class="attr">owners</span>: owners, <span class="attr">threshold</span>: threshold&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> safeSdk_ceo = <span class="keyword">await</span> safeFactory.deploySafe(&#123;safeAccountConfig&#125;);</span><br></pre></td></tr></table></figure>

<p>The safe needs the addresses of the members and the minimum amount of signatures required to approve transactions for this safe. In the code above, you put all members of the startup and <code>3</code> as the threshold. To deploy a safe, you can use the <code>deploySafe</code> method from the safe factory.</p>
<p>Now that you have a safe already, an investor sends money to your startup, which would look like this:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> treasury = safeSdk_ceo.getAddress();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ten_ethers = ethers.utils.parseUnits(<span class="string">&quot;10&quot;</span>, <span class="string">&#x27;ether&#x27;</span>).toHexString();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> params = [&#123;</span><br><span class="line">      <span class="keyword">from</span>: investor,</span><br><span class="line">      to: treasury,</span><br><span class="line">      value: ten_ethers</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line"><span class="keyword">await</span> provider.send(<span class="string">&quot;eth_sendTransaction&quot;</span>, params);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;Fundraising.&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>The safe holds your treasury. The investor sent 10ETH using the <code>eth_sendTransaction</code> RPC method.</p>
<p>To make sure it works, you can check the balance of the treasury with the following:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> balance = <span class="keyword">await</span> safeSdk_ceo.getBalance();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`Initial balance of the treasury: <span class="subst">$&#123;ethers.utils.formatUnits(balance, <span class="string">&quot;ether&quot;</span>)&#125;</span> ETH`</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Obtaining-multisignature-approval"><a href="#Obtaining-multisignature-approval" class="headerlink" title="Obtaining multisignature approval"></a>Obtaining multisignature approval</h2><p>Once the investor’s money is in, you can move fast. Create a transaction to buy a yacht like so:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> three_ethers = ethers.utils.parseUnits(<span class="string">&quot;3&quot;</span>, <span class="string">&#x27;ether&#x27;</span>).toHexString();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> transaction = &#123;</span><br><span class="line">  to: yacht_shop,</span><br><span class="line">  data: <span class="string">&#x27;0x&#x27;</span>,</span><br><span class="line">  value: three_ethers</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> safeTransaction = <span class="keyword">await</span> safeSdk_ceo.createTransaction(transaction);</span><br><span class="line"><span class="keyword">const</span> hash = <span class="keyword">await</span> safeSdk_ceo.getTransactionHash(safeTransaction);</span><br></pre></td></tr></table></figure>

<p>The transaction is sending 3ETH to the yacht shop. Since the transaction is transferring ETH, you can fill empty data, <code>0x</code>, in the data field of the transaction. However, if you create a smart contract transaction, such as minting NFTs or selling tokens, you will need to fill the data field.</p>
<p>After doing that, create the safe transaction using the <code>createTransaction</code> method. Then, get the hash with the <code>getTransactionHash</code> method.</p>
<p>Finally, your job as CEO is to approve the transaction:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> txResponse = <span class="keyword">await</span> safeSdk_ceo.approveTransactionHash(hash);</span><br><span class="line"><span class="keyword">await</span> txResponse.transactionResponse?.wait();</span><br></pre></td></tr></table></figure>

<p>But your job is not done yet. You call your co-founder, the CTO of your startup, and persuade her to approve the transaction of buying a yacht. “Wouldn’t it be nice if you could code in the vast ocean?”</p>
<p>Your CTO agrees to approve the transaction:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> safeSdk_cto = <span class="keyword">await</span> Safe.create(&#123; <span class="attr">ethAdapter</span>: ethAdapter_cto,</span><br><span class="line">                                        safeAddress: treasury,</span><br><span class="line">                                        contractNetworks: contractNetworks &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> safeTransactionCTO = <span class="keyword">await</span> safeSdk_cto.createTransaction(transaction);</span><br><span class="line"><span class="keyword">const</span> hashCTO = <span class="keyword">await</span> safeSdk_ceo.getTransactionHash(safeTransaction);</span><br><span class="line"><span class="keyword">const</span> txResponse_cto = <span class="keyword">await</span> safeSdk_cto.approveTransactionHash(hashCTO);</span><br><span class="line"><span class="keyword">await</span> txResponse_cto.transactionResponse?.wait();</span><br></pre></td></tr></table></figure>

<p>The CTO needs a different Safe object. But you don’t need to create it with the safe factory; you can create it with the <code>create</code> method of the Safe object. Because your safe smart contract is live already on the blockchain, you just passed the treasury address when you created the Safe object.</p>
<p>Next, you pass the transaction to your CTO either by chatting or via email. What the transaction means in this context is the <code>transaction</code> object in the code. Remember, you’ve already created this object:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> transaction = &#123;</span><br><span class="line">  to: yacht_shop,</span><br><span class="line">  data: <span class="string">&#x27;0x&#x27;</span>,</span><br><span class="line">  value: three_ethers</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Your CTO created a safe transaction from this one and got its hash. Then, she approves the transaction using the <code>approveTransactionHash</code> method, which accepts the hash argument.</p>
<p>Your job is still not done yet; you need another signature. But this time, you don’t need to convince your advisor because he gives you full support to buy a yacht. He approves the transaction:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> safeSdk_advisor = <span class="keyword">await</span> Safe.create(&#123; <span class="attr">ethAdapter</span>: ethAdapter_advisor,</span><br><span class="line">                                            safeAddress: treasury,</span><br><span class="line">                                            contractNetworks: contractNetworks &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> safeTransactionAdvisor = <span class="keyword">await</span> safeSdk_advisor.createTransaction(transaction);</span><br><span class="line"><span class="keyword">const</span> txResponse_advisor = <span class="keyword">await</span> safeSdk_advisor.executeTransaction(safeTransactionAdvisor);</span><br><span class="line"><span class="keyword">await</span> txResponse_advisor.transactionResponse?.wait();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;Buying a yacht.&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>The code is the same as the CTO’s approval transaction, but instead of the <code>approveTransactionHash</code> method, the advisor used the <code>executeTransaction</code> method. This method approves the transaction as well behind the scenes. But most importantly, this method executes the safe transaction, which is buying a yacht!</p>
<p>Finally, let’s check your treasury balance:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> afterBalance = <span class="keyword">await</span> safeSdk_ceo.getBalance();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`The final balance of the treasury: <span class="subst">$&#123;ethers.utils.formatUnits(afterBalance, <span class="string">&quot;ether&quot;</span>)&#125;</span> ETH`</span>);</span><br></pre></td></tr></table></figure>

<p>The script is finished. You can execute the script like so:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> node index.js</span></span><br><span class="line">Fundraising.</span><br><span class="line">Initial balance of the treasury: 10.0 ETH</span><br><span class="line">Buying a yacht.</span><br><span class="line">The final balance of the treasury: 7.0 ETH</span><br></pre></td></tr></table></figure>

<p>Now, you can work in a yacht with your team building a DAO to disrupt banks!</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>In this article, you learned how to create a Gnosis Safe that can be configured to require multiple signatures to approve transactions. You launched the Gnosis Safe smart contracts in the Hardhat development network, then, using the Gnosis safe SDK, created a safe to hold the treasury. Using multiple addresses, you created and approved the transaction of sending ETH.</p>
<p>This article only explains the SDK of interacting with the Gnosis Safe smart contracts. If you want to learn the ins and outs of the smart contract themselves, you can check <a target="_blank" rel="noopener" href="https://github.com/gnosis/safe-contracts/">their GitHub repository</a>! The SDK also has other methods like signing a transaction off-chain. Check <a target="_blank" rel="noopener" href="https://github.com/gnosis/safe-core-sdk/tree/main/packages/safe-core-sdk">their GitHub repository</a> to learn more. The code for this article is available on <a target="_blank" rel="noopener" href="https://github.com/arjunaskykok/gnosis-safe-web3-startup">this GitHub repository</a>.</p>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>Post author:  </strong>Weiming Zhuang
  </li>
  <li class="post-copyright-link">
      <strong>Post link: </strong>
      <a href="https://zhuang-weiming.github.io/2022/04/01/%E6%B7%B1%E5%85%A5gnosis-safe/" title="深入gnosis-safe">https://zhuang-weiming.github.io/2022/04/01/深入gnosis-safe/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/%E6%95%B0%E5%AD%97%E8%B5%84%E4%BA%A7/" rel="tag"># 数字资产</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/03/31/%E4%BD%93%E9%AA%8Cfirefly/" rel="prev" title="体验firefly">
                  <i class="fa fa-chevron-left"></i> 体验firefly
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/04/08/IBFT%E6%98%AF%E4%BB%80%E4%B9%88/" rel="next" title="IBFT是什么">
                  IBFT是什么 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Weiming Zhuang</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="/js/local-search.js"></script>






  




  <script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'none'
      },
      options: {
        renderActions: {
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              const target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    const script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-mml-chtml.js';
    script.defer = true;
    document.head.appendChild(script);
  } else {
    MathJax.startup.document.state(0);
    MathJax.typesetClear();
    MathJax.texReset();
    MathJax.typeset();
  }
</script>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css">

<script>
NexT.utils.loadComments('.gitalk-container', () => {
  NexT.utils.getScript('https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : 'bcfbeadd6147f39af62f',
      clientSecret: '36f4ca5368918536f72f6b3816b90c30f61effb3',
      repo        : 'willzhuang.github.io',
      owner       : 'WillZhuang',
      admin       : ['WillZhuang'],
      id          : '4267ace2202d6bab1814b732af175aa8',
      proxy       : 'https://cors-anywhere.herokuapp.com/https://github.com/login/oauth/access_token',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render(document.querySelector('.gitalk-container'));
  }, window.Gitalk);
});
</script>

</body>
</html>
